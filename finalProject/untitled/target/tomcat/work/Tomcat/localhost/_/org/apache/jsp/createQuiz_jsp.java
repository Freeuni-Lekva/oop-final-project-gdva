/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: Apache Tomcat/7.0.47
 * Generated at: 2023-08-20 18:37:48 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;
import java.util.List;
import quizpackage.model.quizzes.*;
import quizpackage.model.DBHandler;

public final class createQuiz_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent {

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  private javax.el.ExpressionFactory _el_expressionfactory;
  private org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public void _jspInit() {
    _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
    _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
  }

  public void _jspDestroy() {
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
        throws java.io.IOException, javax.servlet.ServletException {

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html;charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("<html>\r\n");
      out.write("<head>\r\n");
      out.write("    <link href=\"/CSS/createQuiz.css\" rel=\"stylesheet\" type=\"text/css\">\r\n");
      out.write("</head>\r\n");
      out.write("<body>\r\n");
      out.write('\r');
      out.write('\n');
      out.write('\r');
      out.write('\n');
      out.write("\r\n");
      out.write("<div id = \"entireDiv\">\r\n");
      out.write("    <div id = \"topDiv\">\r\n");
      out.write("        <h1>Create Quiz</h1>\r\n");
      out.write("    </div>\r\n");
      out.write("    <div id =\"bodyDiv\">\r\n");
      out.write("        <div id = \"leftDiv\">\r\n");
      out.write("            <div id=\"leftFirst\">\r\n");
      out.write("                <div id = \"leftCenter\">\r\n");
      out.write("                    <p>question type</p>\r\n");
      out.write("\r\n");
      out.write("                    <form method = \"Post\" action = \"addQuestionServlet\">\r\n");
      out.write("                        <input style=\"display:none\" id = \"numberOfChoices\" name = \"numberOfChoices\" value = \"0\">\r\n");
      out.write("                        <select id=\"mySelect\" name = \"mySelect\">\r\n");
      out.write("                            <option value=\"1\">question response</option>\r\n");
      out.write("                            <option value=\"2\">fill the blank</option>\r\n");
      out.write("                            <option value=\"3\">picture response</option>\r\n");
      out.write("                            <option value=\"4\">multiple choice</option>\r\n");
      out.write("                        </select>\r\n");
      out.write("\r\n");
      out.write("                        ");
      out.write("\r\n");
      out.write("                        ");
      out.write("\r\n");
      out.write("                        ");
      out.write("\r\n");
      out.write("                        ");
      out.write("\r\n");
      out.write("                        ");
      out.write("\r\n");
      out.write("                        ");
      out.write("\r\n");
      out.write("                        ");
      out.write("\r\n");
      out.write("                        ");
      out.write("\r\n");
      out.write("                        ");
      out.write("\r\n");
      out.write("                        ");
      out.write("\r\n");
      out.write("                        ");
      out.write("\r\n");
      out.write("                        ");
      out.write("\r\n");
      out.write("                        ");
      out.write("\r\n");
      out.write("                        ");
      out.write("\r\n");
      out.write("\r\n");
      out.write("                        <div class= \"questionCreate\" id = \"questionCreate\">\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("                            <div id=\"div1\" style=\"display: block;\">\r\n");
      out.write("                                <label for=\"questionResponseText\">question: </label>\r\n");
      out.write("                                <input type=\"text\" id = \"questionResponseText\" name = \"questionResponseText\">\r\n");
      out.write("                                <label for=\"questionResponseAnswer\">answer: </label>\r\n");
      out.write("                                <input type=\"text\" id = \"questionResponseAnswer\" name = \"questionResponseAnswer\">\r\n");
      out.write("                                <label for=\"questionResponseGrade\">grade: </label>\r\n");
      out.write("                                <input type=\"text\" id = \"questionResponseGrade\" name = \"questionResponseGrade\">\r\n");
      out.write("                            </div>\r\n");
      out.write("                            <div id=\"div2\" style=\"display: none;\">\r\n");
      out.write("                                <p>question: </p>\r\n");
      out.write("                                <input type=\"text\" id = \"fillText\" name = \"fillText\">\r\n");
      out.write("                                <p>answer: (separate answers with ~ and no spaces)</p>\r\n");
      out.write("                                <input type=\"text\" id = \"fillAnswer\" name = \"fillAnswer\">\r\n");
      out.write("                                <p>grade: </p>\r\n");
      out.write("                                <input type=\"text\" id = \"fillGrade\" name = \"fillGrade\">\r\n");
      out.write("                            </div>\r\n");
      out.write("                            <div id=\"div3\" style=\"display: none;\">\r\n");
      out.write("                                <p>question: </p>\r\n");
      out.write("                                <input type=\"text\" id =\"pictureText\" name = \"pictureText\">\r\n");
      out.write("                                <p>image: </p>\r\n");
      out.write("                                <input type=\"text\" id = \"pictureURL\" name = \"pictureURL\">\r\n");
      out.write("                                <p>answer: </p>\r\n");
      out.write("                                <input type = \"text\" id = \"pictureAnswer\" name = \"pictureAnswer\">\r\n");
      out.write("                                <p>grade: </p>\r\n");
      out.write("                                <input type=\"text\" id = \"pictureGrade\" name = \"pictureGrade\">\r\n");
      out.write("                            </div>\r\n");
      out.write("                            <div id=\"div4\" style=\"display: none;\">\r\n");
      out.write("                                <p>question: </p>\r\n");
      out.write("                                <input type=\"text\" id=\"multipleText\" name = \"multipleText\">\r\n");
      out.write("                                <p>grade: </p>\r\n");
      out.write("                                <input type=\"text\" id = \"multipleGrade\" name = \"multipleGrade\">\r\n");
      out.write("                                <p>number of choices: </p>\r\n");
      out.write("                                <input type=\"text\" id=\"choicesNumber\" name=\"choicesNumber\">\r\n");
      out.write("                                <div id=\"choices\"></div>\r\n");
      out.write("                                <p>answer: </p>\r\n");
      out.write("                                <input type=\"text\" id=\"multipleAnswer\" name = \"multipleAnswer\">\r\n");
      out.write("                                <script>\r\n");
      out.write("                                    const numInputs = document.querySelector('#choicesNumber');\r\n");
      out.write("                                    const inputsContainer = document.querySelector('#choices');\r\n");
      out.write("                                    let choicesCounter = 0;\r\n");
      out.write("                                    const inp = document.querySelector('#numberOfChoices');\r\n");
      out.write("                                    numInputs.addEventListener('input', (event) => {\r\n");
      out.write("                                        inp.value = choicesCounter.toString();\r\n");
      out.write("                                        const num = parseInt(event.target.value, 10);\r\n");
      out.write("                                        inputsContainer.innerHTML = '';\r\n");
      out.write("\r\n");
      out.write("                                        for (let i = 0; i < num; i++) {\r\n");
      out.write("                                            const input = document.createElement('input');\r\n");
      out.write("                                            input.type = 'text';\r\n");
      out.write("                                            choicesCounter++;\r\n");
      out.write("                                            input.id = 'choice' + choicesCounter.toString();\r\n");
      out.write("                                            input.name = 'choice' + choicesCounter.toString();\r\n");
      out.write("                                            inputsContainer.appendChild(input);\r\n");
      out.write("                                        }\r\n");
      out.write("                                    });\r\n");
      out.write("                                </script>\r\n");
      out.write("                            </div>\r\n");
      out.write("                            <input type=\"submit\" value = \"add question\" id = \"addQuestionButton\">\r\n");
      out.write("                            <script>\r\n");
      out.write("                                const mySelect = document.querySelector('#mySelect');\r\n");
      out.write("                                const div1 = document.querySelector('#div1');\r\n");
      out.write("                                const div2 = document.querySelector('#div2');\r\n");
      out.write("                                const div3 = document.querySelector('#div3');\r\n");
      out.write("                                const div4 = document.querySelector('#div4');\r\n");
      out.write("                                mySelect.addEventListener('change', (event) => {\r\n");
      out.write("                                    const selectedValue = event.target.value;\r\n");
      out.write("\r\n");
      out.write("                                    if (selectedValue === '1') {\r\n");
      out.write("                                        div1.style.display = 'block';\r\n");
      out.write("                                        div2.style.display = 'none';\r\n");
      out.write("                                        div3.style.display = 'none';\r\n");
      out.write("                                        div4.style.display = 'none';\r\n");
      out.write("                                    } else if (selectedValue === '2') {\r\n");
      out.write("                                        div1.style.display = 'none';\r\n");
      out.write("                                        div2.style.display = 'block';\r\n");
      out.write("                                        div3.style.display = 'none';\r\n");
      out.write("                                        div4.style.display = 'none';\r\n");
      out.write("                                    } else if (selectedValue === '3') {\r\n");
      out.write("                                        div1.style.display = 'none';\r\n");
      out.write("                                        div2.style.display = 'none';\r\n");
      out.write("                                        div3.style.display = 'block';\r\n");
      out.write("                                        div4.style.display = 'none';\r\n");
      out.write("                                    }\r\n");
      out.write("                                    else if(selectedValue === '4'){\r\n");
      out.write("                                        div1.style.display = 'none';\r\n");
      out.write("                                        div2.style.display = 'none';\r\n");
      out.write("                                        div3.style.display = 'none';\r\n");
      out.write("                                        div4.style.display = 'block';\r\n");
      out.write("                                    }\r\n");
      out.write("                                });\r\n");
      out.write("                            </script>\r\n");
      out.write("\r\n");
      out.write("                        </div>\r\n");
      out.write("                    </form>\r\n");
      out.write("                    ");
      out.write("\r\n");
      out.write("                    ");
      out.write("\r\n");
      out.write("                    ");
      out.write("\r\n");
      out.write("                    ");
      out.write("\r\n");
      out.write("                    ");
      out.write("\r\n");
      out.write("                    ");
      out.write("\r\n");
      out.write("                    ");
      out.write("\r\n");
      out.write("                    ");
      out.write("\r\n");
      out.write("                    ");
      out.write("\r\n");
      out.write("                    ");
      out.write("\r\n");
      out.write("                    ");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("                    ");
      out.write("\r\n");
      out.write("                    ");
      out.write("\r\n");
      out.write("                    ");
      out.write("\r\n");
      out.write("                    ");
      out.write("\r\n");
      out.write("                    ");
      out.write("\r\n");
      out.write("                    ");
      out.write("\r\n");
      out.write("                    ");
      out.write("\r\n");
      out.write("                    ");
      out.write("\r\n");
      out.write("                    ");
      out.write("\r\n");
      out.write("                    ");
      out.write("\r\n");
      out.write("                    ");
      out.write("\r\n");
      out.write("                    ");
      out.write("\r\n");
      out.write("                    ");
      out.write("\r\n");
      out.write("                    ");
      out.write("\r\n");
      out.write("                    ");
      out.write("\r\n");
      out.write("                    ");
      out.write("\r\n");
      out.write("                    ");
      out.write("\r\n");
      out.write("                    ");
      out.write("\r\n");
      out.write("                    ");
      out.write("\r\n");
      out.write("                    ");
      out.write("\r\n");
      out.write("                    ");
      out.write("\r\n");
      out.write("                    ");
      out.write("\r\n");
      out.write("                    ");
      out.write("\r\n");
      out.write("                    ");
      out.write("\r\n");
      out.write("                    ");
      out.write("\r\n");
      out.write("                    ");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("                    ");
      out.write("\r\n");
      out.write("                    ");
      out.write("\r\n");
      out.write("                    ");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("                    ");
      out.write("\r\n");
      out.write("                    ");
      out.write("\r\n");
      out.write("                    ");
      out.write("\r\n");
      out.write("                </div>\r\n");
      out.write("            </div>\r\n");
      out.write("\r\n");
      out.write("            <div id=\"leftEdge\">\r\n");
      out.write("                <div id=\"leftEdgeCenter\">\r\n");
      out.write("                    ");

                        DBHandler handler = (DBHandler) application.getAttribute("handler");
                        List<Question> questions = (List<Question>) session.getAttribute("questions");
                        int sz = questions == null ? 0 : questions.size();
                        for(int i = 0; i<sz;i++){
                            out.println("<details>");
                            out.print("<summary style=\"background-color:#EFF6E0;position:relative;width:100%;border-color:inherit;\">"+questions.get(i).getQuestionText()+"</summary>");
                            out.println("<p>Grade is: "+questions.get(i).getQuestionGrade()+"</p>");
                            if(questions.get(i).getClass().toString().equals("class quizpackage.model.quizzes.QuestionResponse")){
                                QuestionResponse qr = (QuestionResponse) questions.get(i);
                                out.println("<p>Answer is: "+qr.getQuestionAnswer()+"</p>");
                            }
                            else if(questions.get(i).getClass().toString().equals("class quizpackage.model.quizzes.FillTheBlank")){
                                FillTheBlank fb = (FillTheBlank) questions.get(i);
                                out.println("<p>Answer is: " + fb.getQuestionAnswer()+"</p>");
                            }
                            else if(questions.get(i).getClass().toString().equals("class quizpackage.model.quizzes.PictureResponse")){
                                PictureResponse pr = (PictureResponse) questions.get(i);
                                out.println("<img style=\"position:relative; width:100%;\" src = \""+ pr.getImage() +"\">");
                                out.println("<p>Answer is: " + pr.getQuestionAnswer()+"</p>");
                            }
                            else if(questions.get(i).getClass().toString().equals("class quizpackage.model.quizzes.MultipleChoiceSingleAnswer")){
                                MultipleChoiceSingleAnswer mc = (MultipleChoiceSingleAnswer) questions.get(i);

                                out.println("<p>"+mc.getQuestionText()+"</p>");
                                out.println("<p>"+mc.getQuestionAnswer()+"</p>");
                            }
                            out.println("</details>");
                        }
                    
      out.write("\r\n");
      out.write("                </div>\r\n");
      out.write("\r\n");
      out.write("            </div>\r\n");
      out.write("        </div>\r\n");
      out.write("        <div id=\"rightHolder\">\r\n");
      out.write("            <div id=\"rightDiv\">\r\n");
      out.write("                <form action=\"createQuizServlet\" method=\"post\">\r\n");
      out.write("                    <p>Quiz Properties: </p>\r\n");
      out.write("                    <div id = \"properties\">\r\n");
      out.write("                        <p>Quiz Title: </p>\r\n");
      out.write("                        <input type=\"text\" placeholder=\"enter quiz title\" id=\"quizTitle\" name=\"quizTitle\">\r\n");
      out.write("                        <p>Quiz Description: </p>\r\n");
      out.write("                        <input type = \"text\" placeholder = \"enter quiz description\" id=\"quizDescription\" name=\"quizDescription\">\r\n");
      out.write("                        <p>Question order</p>\r\n");
      out.write("                        <select name=\"questionOrder\">\r\n");
      out.write("                            <option>randomized</option>\r\n");
      out.write("                            <option>ordered</option>\r\n");
      out.write("                        </select>\r\n");
      out.write("                        <p>Question alignment</p>\r\n");
      out.write("                        <select name = \"questionAlignment\">\r\n");
      out.write("                            <option>one page</option>\r\n");
      out.write("                            <option>multiple pages</option>\r\n");
      out.write("                        </select>\r\n");
      out.write("                        <p>Answer type</p>\r\n");
      out.write("                        <select name=\"answerType\">\r\n");
      out.write("                            <option>immediate</option>\r\n");
      out.write("                            <option>after submit</option>\r\n");
      out.write("                        </select>\r\n");
      out.write("                        <input type=\"submit\" id=\"createQuizButton\" name=\"createQuizButton\" value=\"Create Quiz\">\r\n");
      out.write("                    </div>\r\n");
      out.write("                </form>\r\n");
      out.write("            </div>\r\n");
      out.write("        </div>\r\n");
      out.write("\r\n");
      out.write("    </div>\r\n");
      out.write("\r\n");
      out.write("</div>\r\n");
      out.write("\r\n");
      out.write("</body>\r\n");
      out.write("</html>\r\n");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try { out.clearBuffer(); } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
